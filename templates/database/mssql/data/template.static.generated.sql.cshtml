-- Insert default data source record
INSERT INTO [core].[data_source] ([id], [name], [is_active], [created_by], [last_updated], [last_updated_by], [version]) VALUES (NEXT VALUE FOR core.data_source_identity, 'default', 1, SYSTEM_USER, GETDATE(), SYSTEM_USER, 1);

INSERT INTO [core].[server_node_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, 'Agent', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[server_node_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'Scheduler', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[server_node_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (3, 'ApiServer', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

INSERT INTO [core].[server_node_status] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, 'Initializing', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[server_node_status] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'Online', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[server_node_status] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (3, 'Busy', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[server_node_status] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (4, 'Offline', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

INSERT INTO [core].[workflow_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, 'Folder', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[workflow_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'Process', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

INSERT INTO [core].[on_failure] ([id], [action], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, 'Stop', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[on_failure] ([id], [action], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'Continue', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);


INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, '', 'images/exec-status-1.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'Dispatched', 'images/exec-status-2.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (3, 'Executing', 'images/exec-status-3.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (4, 'Completed', 'images/exec-status-4.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (5, 'Failed', 'images/exec-status-5.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (6, 'Cancelled', 'images/exec-status-6.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (7, 'Timeout', 'images/exec-status-7.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (8, 'Interrupted', 'images/exec-status-8.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[exec_status] ([id], [name], [image], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (9, 'Suspended', 'images/exec-status-9.png', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

INSERT INTO [core].[script_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (1, 'CSharp', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[script_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (2, 'PowerShell', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [core].[script_type] ([id], [name], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (3, 'Python', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Insert AgentLogic method operations
-- Process Management Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'start', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'stop', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'kill', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'restart', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'pause', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'resume', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Status & Reporting Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'status', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'heartbeat', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'report', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'log', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'metrics', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Resource Management Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'register', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'unregister', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'capabilities', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'allocate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'release', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Job Execution Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'execute', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'validate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'prepare', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'cleanup', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'retry', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Communication Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'ping', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'acknowledge', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'notify', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'request', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- System Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'shutdown', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'reload', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'diagnose', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'health', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Security Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'authenticate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'authorize', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Standard Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'select', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'get', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'getAgentInfo', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'insert', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'update', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'delete', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);


-- Scheduler Operations
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity, 'Scheduler', 'execute', 1, current_timestamp, current_user, current_user, 1);
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity, 'Scheduler', 'validate', 1, current_timestamp, current_user, current_user, 1);
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity, 'Scheduler', 'configure', 1, current_timestamp, current_user, current_user, 1);
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity, 'Scheduler', 'health', 1, current_timestamp, current_user, current_user, 1);
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity, 'Scheduler', 'register', 1, current_timestamp, current_user, current_user, 1);
insert into sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) values (NEXT VALUE FOR sec.operation_identity , 'Scheduler', 'unregister', 1,current_timestamp,current_user,current_user ,1);

DECLARE @@operation_id BIGINT;
@{
	foreach( var metaObject in Model.Objects)
	{
		<text>
		
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'select', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'get', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'view', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'insert', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'put', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'update', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'delete', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'history', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'children', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		</text>

	}
}