-- Insert default data source record
INSERT INTO [core].[data_source]
           ([id]
           ,[name]
           ,[is_active]
           ,[created_by]
           ,[last_updated]
           ,[last_updated_by]
           ,[version])
     VALUES
           (NEXT VALUE FOR core.data_source_identity, 
		   'default',
		   1,
		   CURRENT_USER,
		   getdate(),
		   CURRENT_USER,
		   1);

-- Insert agent status values
INSERT INTO [core].[agent_status] ([id], [name]) VALUES (1, 'Initializing');
INSERT INTO [core].[agent_status] ([id], [name]) VALUES (2, 'Online');
INSERT INTO [core].[agent_status] ([id], [name]) VALUES (3, 'Busy');
INSERT INTO [core].[agent_status] ([id], [name]) VALUES (4, 'Offline');

-- Insert on_failure action values
INSERT INTO [core].[on_failure] ([id], [action]) VALUES (1, 'Stop');
INSERT INTO [core].[on_failure] ([id], [action]) VALUES (2, 'Continue');

-- Insert exec_status values
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (1, 'Dispatched');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (2, 'Executing');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (3, 'Completed');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (4, 'Failed');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (5, 'Cancelled');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (6, 'Timeout');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (7, 'Interrupted');
INSERT INTO [core].[exec_status] ([id], [status]) VALUES (8, 'Suspended');

-- Insert script type values
INSERT INTO [core].[script_type] ([id], [name]) VALUES (1, 'CSharp');
INSERT INTO [core].[script_type] ([id], [name]) VALUES (2, 'PowerShell');

-- Insert AgentLogic method operations
-- Process Management Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'start', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'stop', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'kill', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'restart', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'pause', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'resume', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Status & Reporting Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'status', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'heartbeat', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'report', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'log', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'metrics', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Resource Management Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'register', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'unregister', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'capabilities', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'allocate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'release', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Job Execution Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'execute', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'validate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'prepare', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'cleanup', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'retry', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Communication Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'ping', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'acknowledge', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'notify', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'request', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- System Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'shutdown', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'reload', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'update', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'diagnose', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'health', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Security Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'authenticate', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'authorize', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);

-- Standard Operations
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'select', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'get', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'getAgentInfo', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'insert', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'update', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);
INSERT INTO [sec].[operation] ([id], [objectname], [methodname], [is_active], [last_updated], [created_by], [last_updated_by], [version]) VALUES (NEXT VALUE FOR sec.operation_identity, 'Agent', 'delete', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER, 1);




DECLARE @@operation_id BIGINT;
@{
	foreach( var metaObject in Model.Objects)
	{
		<text>
		

		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'select', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'get', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'insert', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);

		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'put', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'update', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		
		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'delete', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);

		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'history', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);

		SELECT @@operation_id = NEXT VALUE FOR sec.operation_identity;
		INSERT INTO sec.operation (id, objectname, methodname, is_active, last_updated, created_by, last_updated_by, version) VALUES (@@operation_id,'@metaObject.DomainObj', 'children', 1, GETDATE(), SYSTEM_USER, SYSTEM_USER,1);
		</text>

	}
}