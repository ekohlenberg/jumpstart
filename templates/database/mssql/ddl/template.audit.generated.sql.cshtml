
SET NOCOUNT ON;
SET ANSI_WARNINGS OFF;
SET ANSI_PADDING OFF;
SET QUOTED_IDENTIFIER OFF;
USE [@Model.Namespace];
GO
create table history.@(Model.SchemaName + "_" + Model.TableName) (
    id BIGINT PRIMARY KEY,
@for (int i = 0; i < Model.Attributes.Count; i++) {
    
    var column = Model.Attributes[i];
    var column_name = column.Name;
   
    if (column.Name == "id"){
        column_name = Model.TableName+ "_id";
    }

    var len = "";
    if ((column.Length.Length > 0) && (column.Length != "NULL")) {
        len = "(" + column.Length + ")";
    }

    var nullable = "";
    if (column.IsNullable == false) {
        nullable = " not null";
    }

    var comma = "";
    if (i < Model.Attributes.Count - 1) {
        comma = ",";
    } 

    @("\t\t" +
column_name + " " + column.MSSQLDataType + len + " " + nullable + comma + @"
"
)
    ;

        
    }
);